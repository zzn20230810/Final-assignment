# 动量变化热力图解读指南

## 一、热力图的基本结构

每个热力图展示**一场比赛**中**动量特征随时间（点数）的变化**。

### 坐标轴说明：
- **横轴（X轴）**：点数（point_no），表示比赛进行到第几个点
- **纵轴（Y轴）**：动量特征，包括以下6个特征：
  1. `score_diff` - 得分差距（p1_points_won - p2_points_won）
  2. `set_diff` - 盘数差距（p1_sets - p2_sets）
  3. `game_diff` - 局数差距（p1_games - p2_games）
  4. `p1_recent_win_rate` - 选手1最近5点的得分率
  5. `p2_recent_win_rate` - 选手2最近5点的得分率
  6. `p1_streak` - 选手1的连胜次数
  7. `p2_streak` - 选手2的连胜次数

### 颜色说明：
- **颜色映射**：使用 `RdYlGn`（红-黄-绿）配色方案
- **红色区域**：表示**负值**或**低值**（对选手1不利）
- **黄色区域**：表示**中间值**或**平衡状态**
- **绿色区域**：表示**正值**或**高值**（对选手1有利）

## 二、各特征的具体含义

### 1. score_diff（得分差距）
- **含义**：选手1的累积得分 - 选手2的累积得分
- **解读**：
  - **绿色**：选手1领先（正值越大，领先越多）
  - **红色**：选手2领先（负值越大，选手1落后越多）
  - **黄色**：比分接近

### 2. set_diff（盘数差距）
- **含义**：选手1赢得的盘数 - 选手2赢得的盘数
- **解读**：
  - **绿色**：选手1盘数领先
  - **红色**：选手2盘数领先
  - **黄色**：盘数持平

### 3. game_diff（局数差距）
- **含义**：当前盘中，选手1赢得的局数 - 选手2赢得的局数
- **解读**：
  - **绿色**：选手1在当前盘局数领先
  - **红色**：选手2在当前盘局数领先
  - **黄色**：当前盘局数持平

### 4. p1_recent_win_rate（选手1近期得分率）
- **含义**：选手1在最近5个点中的得分率（0-1之间）
- **解读**：
  - **绿色**：选手1近期表现好（得分率高）
  - **红色**：选手1近期表现差（得分率低）
  - **黄色**：选手1近期表现一般（得分率约50%）

### 5. p2_recent_win_rate（选手2近期得分率）
- **含义**：选手2在最近5个点中的得分率（0-1之间）
- **解读**：
  - **绿色**：选手2近期表现好（得分率高）
  - **红色**：选手2近期表现差（得分率低）
  - **黄色**：选手2近期表现一般（得分率约50%）

### 6. p1_streak（选手1连胜次数）
- **含义**：选手1连续得分的次数
- **解读**：
  - **绿色**：选手1正在连胜（数值越大，连胜越多）
  - **红色/黄色**：选手1没有连胜（值为0或很小）

### 7. p2_streak（选手2连胜次数）
- **含义**：选手2连续得分的次数
- **解读**：
  - **绿色**：选手2正在连胜（数值越大，连胜越多）
  - **红色/黄色**：选手2没有连胜（值为0或很小）

## 三、如何识别"势头"变化

### 1. 观察颜色变化趋势
- **从左到右**观察每一行的颜色变化
- **突然的颜色变化**（如从红变绿，或从绿变红）表示**势头转换**
- **持续的颜色区域**表示**势头稳定**

### 2. 关键观察点

#### 势头转换点：
- 当多个特征同时从红色变为绿色（或相反）时，表示**势头发生了明显转换**
- 例如：`score_diff`从红变绿，同时`p1_recent_win_rate`也变绿，说明选手1开始占据优势

#### 势头延续：
- 当多个特征保持同一颜色（如都是绿色）时，表示**势头持续**
- 例如：`p1_streak`持续为绿色，`p1_recent_win_rate`也保持绿色，说明选手1势头正旺

#### 平衡状态：
- 当特征在黄色区域波动时，表示**比赛处于平衡状态**
- 双方都没有明显的优势

### 3. 综合分析示例

**示例1：选手1势头上升**
- `score_diff`：从红色逐渐变为绿色（选手1开始领先）
- `p1_recent_win_rate`：变为绿色（选手1近期得分率高）
- `p1_streak`：出现绿色区域（选手1开始连胜）
- **结论**：选手1势头上升，可能正在逆转比赛

**示例2：选手2势头上升**
- `score_diff`：从绿色变为红色（选手1被反超）
- `p2_recent_win_rate`：变为绿色（选手2近期得分率高）
- `p2_streak`：出现绿色区域（选手2开始连胜）
- **结论**：选手2势头上升，正在占据优势

**示例3：比赛胶着**
- 所有特征在黄色区域频繁波动
- 没有明显的持续绿色或红色区域
- **结论**：比赛处于胶着状态，双方势均力敌

## 四、三个热力图的区别

程序会生成**三个不同比赛**的热力图：
- `momentum_heatmap_1.png`：第一场比赛
- `momentum_heatmap_2.png`：第二场比赛
- `momentum_heatmap_3.png`：第三场比赛

每场比赛的：
- **比赛ID不同**（显示在标题中）
- **点数不同**（横轴长度不同）
- **势头变化模式不同**（可以对比不同比赛的势头变化特点）

## 五、实际应用

### 1. 预测下一分胜负
- 观察**最近几个点**的特征值
- 如果多个特征显示选手1势头好（绿色），则预测选手1可能赢得下一分
- 如果多个特征显示选手2势头好（红色），则预测选手2可能赢得下一分

### 2. 识别关键转折点
- 寻找**颜色突然变化**的点
- 这些点可能是比赛的**关键转折点**
- 例如：破发点、赛点等关键时刻

### 3. 分析比赛节奏
- **绿色区域密集**：比赛节奏快，一方占据明显优势
- **黄色区域多**：比赛节奏慢，双方胶着
- **颜色频繁变化**：比赛节奏变化快，双方交替领先

## 六、注意事项

1. **颜色条（Colorbar）**：右侧的颜色条显示数值范围，可以帮助理解颜色的具体含义
2. **归一化**：某些特征可能经过了归一化处理，数值范围可能不是原始值
3. **特征组合**：需要**综合多个特征**来判断势头，不要只看单一特征
4. **时间窗口**：`p1_recent_win_rate`和`p2_recent_win_rate`是基于最近5个点的滑动窗口计算的

## 七、快速阅读技巧

1. **先看整体**：快速浏览整个热力图，了解整体趋势
2. **再看细节**：关注颜色变化明显的区域
3. **对比特征**：同时观察多个特征，看它们是否一致
4. **识别模式**：寻找重复出现的颜色模式（如周期性变化）

---

**总结**：热力图通过颜色直观地展示了比赛中"势头"的变化，绿色代表选手1优势，红色代表选手2优势，黄色代表平衡。通过观察颜色变化，可以识别势头转换、预测比赛走向，并理解比赛的动态特征。
